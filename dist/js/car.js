"use strict";function convertCookieStrToCookieObj(t){return t?JSON.parse(t):{}}$(function(){var t=$.cookie("loginedUsers")?$.cookie("loginedUsers"):"";t?$(".huan").html("欢迎，"+t):$(".huan").html("欢迎进入我的金象网&gt;");var o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");if($.isEmptyObject(o))$(".blank").css("display","block");else{$(".blank").css("display","none");$("main .margin").append(' <h2>全部商品<span>1</span></h2>\n\t                           <table>\n\t\t\t\t\t\t  \t    <tr>\n\t\t\t\t\t\t  \t        <td><input type="checkbox" class="all"/>全选</td>\n\t\t\t\t\t\t  \t        <td>商品名称</td>\n\t\t\t\t\t\t  \t        <td>商品编号</td>\n\t\t\t\t\t\t  \t        <td>生产厂家</td>\n\t\t\t\t\t\t  \t        <td>金象价</td>\n\t\t\t\t\t\t  \t        <td>数量</td>\n\t\t\t\t\t\t  \t        <td>商品合计</td>\n\t\t\t\t\t\t  \t        <td>操作</td>\n\t\t\t\t\t\t  \t    </tr>\n\t\t  \t                     <tr></tr>\n\t\t  \t                     </table>\n\t\t  \t                      ');var e=0;for(var n in o){var i=o[n],c='\n\t\t  \t         \t      <tr class="goodInfo" data-good-id="'.concat(n,'">\n\t\t\t\t\t  \t        <td><input type="checkbox"/><img width="100px" height="100px" src="').concat(i.src,'" /></td>\n\t\t\t\t\t  \t        <td>').concat(i.name,"</td>\n\t\t\t\t\t  \t        <td>55016</td>\n\t\t\t\t\t  \t        <td>北京同仁堂股份有限公司制药厂</td>\n\t\t\t\t\t  \t        <td>").concat(i.price,'</td>\n\t\t\t\t\t  \t        <td class="num"><a href="javascript:;" class="minus" style="float:left;width:16px;height:20px;border:1px solid #cacbcb;border-right:0;margin-left:35px;line-height:20px;">-</a>\n\t\t\t\t\t\t\t\t<input type="text" name="" id="" value="').concat(i.num,'" style="width:50px;height:20px;text-align:center;float:left;border:1px solid #cacbcb;"/>\n\t\t\t\t\t\t\t\t<a href="javascript:;" class="plus" style="float:left;width:16px;height:20px;border:1px solid #cacbcb;border-left:0;line-height:20px;">+</a></td>\n\t\t\t\t\t  \t        <td class="total">').concat(i.price*i.num,'</td>\n\t\t\t\t\t  \t        <td><a href="javascript:;" class="del">删除</a></td>\n\t\t  \t                 </tr>\n\t\t  \t         \t ');e+=i.num,$("main .margin table").append(c)}$(".sele a").eq(0).find("b").html("购物车("+e+")");var a='<ul class="zong">\n                        \t           <li><input type="checkbox" class="all1"/>全选</li>\n                        \t           <li class="batch">批量删除</li>\n                        \t           <li>清空购物车</li>\n                        \t           <li><a href="male.html">&lt;&lt;继续购物</a></li>\n                        \t           <li>商品总价(不含运费)：<span>￥'.concat($(".total").html(),'</span></li>\n                        \t           </ul>\n                        \t           <div class="jiesuan">\n\t\t\t\t\t\t\t\t      <button>去结算</button>\n\t\t\t\t\t\t\t\t  </div>');$("main .margin").append(a),$(".goodInfo .num .minus").click(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");1<o[t].num&&(o[t].num--,e--),$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),$(this).next().val(o[t].num),$(this).parent().next().html(o[t].price*o[t].num),$(".sele a").eq(0).find("b").html("购物车("+e+")"),$(".zong li").eq(4).find("span").html("￥"+o[t].price*o[t].num)}),$(".goodInfo .num .plus").click(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");o[t].num++,e++,$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),$(this).prev().val(o[t].num),$(this).parent().next().html(o[t].price*o[t].num),$(".sele a").eq(0).find("b").html("购物车("+e+")"),$(".zong li").eq(4).find("span").html("￥"+o[t].price*o[t].num)}),$(".goodInfo .num input").blur(function(){var t=$(this).parents(".goodInfo").attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):""),e=$(this).val();/^\d+$/.test(e)&&1<e||(e=1),o[t].num=e,$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),$(this).val(o[t].num),$(this).parent().next().html(o[t].price*o[t].num)}),$(".goodInfo .del").click(function(){var t=$(this).parents(".goodInfo").remove().attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");delete o[t],$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),window.location.reload()}),$(".zong li").eq(2).click(function(){var t=$(".goodInfo .del").parents(".goodInfo").remove().attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");delete o[t],$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),window.location.reload()})}$(".all").click(function(){$(".all").is(":checked")?$("input[type='checkbox']").prop("checked",!0):$("input[type='checkbox']").prop("checked",!1)}),$(".all1").click(function(){$(".all1").is(":checked")?$("input[type='checkbox']").prop("checked",!0):$("input[type='checkbox']").prop("checked",!1)}),$(".batch").click(function(){if($("input[type='checkbox']").is(":checked")){var t=$(".goodInfo .del").parents(".goodInfo").remove().attr("data-good-id"),o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");delete o[t],$.cookie("cart",JSON.stringify(o),{expires:7,path:"/"}),window.location.reload()}})});