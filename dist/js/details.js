"use strict";var user=$.cookie("loginedUsers")?$.cookie("loginedUsers"):"";user?$(".huan").html("欢迎，"+user):$(".huan").html("欢迎进入我的金象网&gt;");var cookieStr=$.cookie("cart")?$.cookie("cart"):"",cookieObj=convertCookieStrToCookieObj(cookieStr),num=0;for(var key in cookieObj){var sp=cookieObj[key];num+=Number(sp.num)}$(".sele a").eq(0).find("b").html("购物车 "+num),$(".cart a u").html(num).css("color","#fff"),$(".classify").hover(function(){$(this).find("dl").css("display","block")},function(){$(this).find("dl").css("display","none")}),$(".small").css("width",($(".small img").eq(0).outerWidth()+20)*$(".small img").length);var count=0;function qian(){0==count?count=0:count--,$(".small").css("left",-count*($(".small img").eq(0).outerWidth()+20))}function hou(){count>=$(".small img").length-4?count=$(".small img").length-4:count++,$(".small").css("left",-count*($(".small img").eq(0).outerWidth()+20))}$(".s1").click(function(){qian()}),$(".s2").click(function(){hou()});for(var _loop=function(o){$(".small img").eq(o).mouseover(function(){$(".show .showsmall").attr("src","images/O"+(o+1)+".jpg")})},j=0;j<$(".small img").length;j++)_loop(j);function init(){var o=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):""),t=0;for(var i in o)t+=o[i].num;$(".sele a").eq(0).find("b").html("购物车("+t+")"),$(".order .cart").find("span").html(t)}function convertCookieStrToCookieObj(o){return o?JSON.parse(o):{}}$(".show").mouseover(function(){$(".show .showbig").attr("src",$(".show .showsmall").attr("src")),$(".filter").css("display","block"),$(".big").css("display","block")}),$(".show").mouseleave(function(){$(".filter").css("display","none"),$(".big").css("display","none")}),$(".show").mousemove(function(o){var t=o.pageX-$(this).offset().left-$(".filter").width()/2,i=o.pageY-$(this).offset().top-$(".filter").height()/2;t=t<0?0:210<t?210:t,i=i<0?0:210<i?210:i,$(".filter").css({left:t,top:i}),$(".show .showbig").css({height:840,left:-2*t,top:-2*i,width:840})}),$(window).scroll(function(){882<$(this).scrollTop()?$(".nv").css({position:"fixed",top:20,left:275}):$(".nv").css({position:"absolute",top:0,left:0}),924<$(this).scrollTop()?$(".product").css({position:"fixed",top:40,left:1074.5}):$(".product").css({position:"absolute",top:0,left:802}),6678<=$(this).scrollTop()&&$(".product").css({position:"absolute",top:0,left:802})}),$(".nv ul li").each(function(){$(this).hover(function(){$(this).css({background:"#4496ee",color:"#fff"})},function(){$(this).css({background:"#eee",color:"#333"}),$(".nv ul li").eq(0).css({background:"#4496ee",color:"#fff"})})}),$(function(){var l=parseInt($(".shu input").val());$(".num .jishu .bttn .button1").click(function(){var o=$(".shu input").val();46<=$(".shu input").val()?$(".shu input").val("46"):o++,$(".shu input").val(o),l=parseInt($(".shu input").val())}),$(".num .jishu .bttn .button2").click(function(){var o=$(".shu input").val();$(".shu input").val()<=1?$(".shu input").val("1"):o--,$(".shu input").val(o),l=parseInt($(".shu input").val())}),init(),$(".order .cart").click(function(){window.location="cart.html"}),$(".add").click(function(o){var t=$(this).parent(".good-c").attr("data-good-id"),i=$(".show .showsmall").attr("src"),n=$(".tit").html(),s=parseInt($(".p2").find("span").html()),e=convertCookieStrToCookieObj($.cookie("cart")?$.cookie("cart"):"");t in e?e[t].num=e[t].num+l:e[t]={src:i,name:n,price:s,num:1},$.cookie("cart",JSON.stringify(e),{expires:7,path:"/"});var c=$(".show .showsmall").clone().css({width:50,height:50});c.fly({start:{left:o.clientX,top:o.clientY},end:{left:$(".order .cart").offset().left,top:$(".order .cart").offset().top-$(window).scrollTop(),width:0,height:0},autoPlay:!0,onEnd:function(){c.remove();var o=parseInt($(".order .cart").find("span").html()),t=parseInt(/(\d+)/.exec($(".sele a").eq(0).find("b").html()));$(".order .cart").find("span").html(o+l),$(".sele a").eq(0).find("b").html("购物车("+(t+l)+")")}})})}),$("#hanging a").eq(0).hover(function(){$(this).find(".xin").css("display","block")},function(){$(this).find(".xin").css("display","none")}),$("#hanging a").eq(2).hover(function(){$(this).find(".xiaowei").css("display","block")},function(){$(this).find(".xiaowei").css("display","none")}),$("#hanging a").eq(3).click(function(){$("html,body").animate({scrollTop:"0px"},1e3)});